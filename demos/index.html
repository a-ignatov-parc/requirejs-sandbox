<!doctype html>
<html lang="en">
	<head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<title>requrejs-sandbox demo</title>
		<link rel="stylesheet" type="text/css" href="../static/styles/css/main.css">
		<script src="../static/js/libs/require.min.js"></script>
		<script src="../src/requirejs-sandbox.js"></script>
		<script src="../src/transits/transit.jquery.js"></script>
		<script src="../src/transits/transits.js"></script>
		<script>
			// Необходимо до тех пор пока в модуле `requirejs-sandbox` используется `underscore`, 
			// как зависимость.
			requirejs.config({
				baseUrl: '../static/js/app',
				paths: {
					'underscore': '../libs/underscore.min'
				},
				shim: {
					underscore: {
						exports: '_'
					}
				}
			});

			requirejs(['requirejs-sandbox'], function(requrejsSandbox) {
				console.log('requirejs-sandbox api', requrejsSandbox);

				// Инициализируем песочницу и пытаемся загрузить в нее вью `workspace`.
				requrejsSandbox.set('DemoApp', {
					requireUrl: '../static/js/libs/require.min.js',
					requireConfig: {
						baseUrl: '../static/js/app',
						paths: {
							'backbone': '../libs/backbone',
							'jquery': '../libs/jquery/jquery.min',
							'underscore': '../libs/underscore.min'
						},
						shim: {
							underscore: {
								exports: '_'
							},
							backbone: {
								deps: ['underscore', 'jquery'],
								exports: 'Backbone'
							}
						}
					},
					callback: function(require) {
						// Пытаемся загрузить в песочницу вью и инициализировать ее.
						require(['views/workspace'], function(Workspace) {
							var workspace = new Workspace;
						});
					}
				});
			});
		</script>
	</head>
	<body>
		<div class="b-content">
			Look in console for debug info
		</div>
	</body>
</html>
